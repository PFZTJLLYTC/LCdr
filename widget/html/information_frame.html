<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
    <title>我</title>
    <link rel="stylesheet" type="text/css" href="../css/api.css"/>
    <link rel="stylesheet" type="text/css" href="../css/style.css"/>
    <style type="text/css">
        * {
            font-size: 12px;
            margin: 0;
            padding: 0;
        }

        .row{
          height: 35px;
          margin-top: 30px;
          margin-bottom: 10px;
          margin-left: 20px;
          margin-right: 20px;
          border-bottom: 1px solid #E0E0E0;
        }

        .tag{
          display: inline-block;
          width: 85px;
          font-size: 16px;
          text-align: left;
        }

        .btn{
          width: 90%;
          height: 50px;
          margin-left: 20px;
          margin-right: 20px;
          margin-top: 32px;
          color: #fff;
          font-size: 16px;
          line-height: 50px;
          text-align: center;
          background-color: #41d922;
          background-repeat: no-repeat;
          background-position: center;
        }


         .input{
          width: 50%;
          height: 20px;
          line-height: 20px;
          border: none;
          outline: none;
          font-size: 16px;
          background-color: white;
        }

        .changePassword{
          font-size: 16px;
          color: #41d922;
        }

    </style>
</head>
<body>

      <div class="row">
          <span class="tag">姓名</span>
          <input id="driverName" type="text" class="input" readonly>
      </div>
      <div class="row">
          <span class="tag">车牌号</span>
          <input id="carNum" type="text" class="input" readonly>
      </div>

      <div class="row">
          <span class="tag">手机号</span>
          <input id="dnum" type="text" class="input" readonly>
      </div>

      <div class="row">
          <span class="tag">密码</span>
          <span id"password" class="changePassword" onclick="fnChangePassword();">修改密码</span>
      </div>


      <div class="btn" tapmode onclick="fnUpdateInfo();">提交</div>

  <script type="text/javascript" src="../script/api.js"></script>
  <script type="text/javascript" src="../script/common.js"></script>
  <script type="text/javascript">
  /*初始化得到用户信息*/
  apiready = function() {
      fnShowInfo();
  };


  var userInfo;
  var driverName;
  var carNum;
  var dnum;


  function fnShowInfo(){

    userInfo=$api.getStorage("userInfo");
    driverName=$api.byId("driverName");
    carNum=$api.byId("carNum");
    dnum=$api.byId("dnum");

    $api.val(driverName,userInfo.name);
    $api.val(carNum,userInfo.carNum);
    $api.val(dnum,userInfo.dnum);
  }

  function fnUpdateInfo(){

    // api.ajax({
    //     url: 'http://'+url+':'+port+'/driver/update/'+userInfo.dnum,
    //     method: 'post',
    //     headers: {
    //           'Content-Type': 'application/json;charset=utf-8'
    //       },
    //     data: {
    //         body:{
    //           "name":nameValue,
    //           "carNum":carNumValue,
    //           "dnum":dnumValue,
    //         }
    //     }
    // },function(ret, err){
    //     if (ret) {
    //         console.log(JSON.stringify(ret));
    //         if(ret.code==0){
    //           fnShowInfo(ret.data);
    //           api.toast({
    //               msg: '修改成功',
    //               duration: 2000,
    //               location: 'middle'
    //           });
    //         }else{
    //           api.toast({
    //               msg: '修改失败',
    //               duration: 2000,
    //               location: 'middle'
    //           });
    //         }
    //     } else {
    //         console.log(JSON.stringify(ret));
    //         api.toast({
    //             msg: '异常错误',
    //             duration: 2000,
    //             location: 'middle'
    //         });
    //     }
    // });
            api.toast({
                msg: '功能测试中',
                duration: 2000,
                location: 'middle'
            });

  }

  function fnChangePassword(){
    api.openWin({
        name: 'checkPhone',
        url: './checkPhone.html',
        pageParam: {
            nextPage:"changePassword",
            backPage:"information",
        }
    });

  }
  </script>
</body>
</html>
